<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ho√†ng Vinh - Happy New Year 2026</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700;900&family=Inter:wght@400;600&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        display: ['Outfit', 'sans-serif'],
                    },
                    colors: {
                        gold: '#FFD700',
                    }
                }
            }
        }
    </script>

    <style>
        body { background-color: #050505; color: white; }
        /* Hi·ªáu ·ª©ng n·ªÅn noise nh·∫π */
        .bg-noise {
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
            opacity: 0.05;
        }
        canvas {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 0;
        }
        /* Input autofill fix cho n·ªÅn t·ªëi */
        input:-webkit-autofill,
        input:-webkit-autofill:hover, 
        input:-webkit-autofill:focus {
            -webkit-text-fill-color: white;
            -webkit-box-shadow: 0 0 0px 1000px #1a1a1a inset;
            transition: background-color 5000s ease-in-out 0s;
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center relative overflow-hidden selection:bg-yellow-500 selection:text-black">

    <!-- Canvas Ph√°o Hoa -->
    <canvas id="fireworksCanvas"></canvas>
    <div class="absolute inset-0 bg-noise pointer-events-none"></div>

    <!-- Main Container -->
    <div class="relative z-10 w-full max-w-md p-6">
        <div class="bg-[#111] border border-white/10 p-8 shadow-2xl relative">
            
            <!-- Trang tr√≠ g√≥c -->
            <div class="absolute top-0 left-0 w-4 h-4 border-t border-l border-yellow-500"></div>
            <div class="absolute top-0 right-0 w-4 h-4 border-t border-r border-yellow-500"></div>
            <div class="absolute bottom-0 left-0 w-4 h-4 border-b border-l border-yellow-500"></div>
            <div class="absolute bottom-0 right-0 w-4 h-4 border-b border-r border-yellow-500"></div>

            <!-- Header -->
            <div class="text-center mb-10">
                <div class="inline-block border border-yellow-500/30 px-3 py-1 mb-4 text-[10px] tracking-[0.2em] text-yellow-500 uppercase">
                    Event 2026
                </div>
                <h1 class="font-display font-black text-6xl text-white mb-2 tracking-tighter">
                    2026
                </h1>
                <p class="text-white/50 text-sm uppercase tracking-widest">
                    L√¨ X√¨ NƒÉm M·ªõi
                </p>
            </div>

            <!-- Khu v·ª±c ƒê·∫øm ng∆∞·ª£c / Tr·∫°ng th√°i -->
            <div id="status-area" class="mb-8 text-center border-y border-white/5 py-6">
                <p id="timer-label" class="text-[10px] text-white/30 uppercase tracking-widest mb-3">Th·ªùi gian m·ªü c·ªïng</p>
                
                <!-- ƒê·ªìng h·ªì ƒë·∫øm ng∆∞·ª£c -->
                <div id="countdown-ui" class="flex justify-center gap-4 font-mono text-xl">
                    <div><span id="d-day" class="text-white font-bold">00</span><span class="text-[10px] text-white/30 block">Ng√†y</span></div>
                    <div><span id="d-hour" class="text-white font-bold">00</span><span class="text-[10px] text-white/30 block">Gi·ªù</span></div>
                    <div><span id="d-min" class="text-white font-bold">00</span><span class="text-[10px] text-white/30 block">Ph√∫t</span></div>
                    <div><span id="d-sec" class="text-yellow-500 font-bold">00</span><span class="text-[10px] text-white/30 block">Gi√¢y</span></div>
                </div>

                <!-- Th√¥ng b√°o tr·∫°ng th√°i (·∫®n m·∫∑c ƒë·ªãnh) -->
                <div id="status-message" class="hidden text-lg font-bold tracking-wider"></div>
            </div>

            <!-- Form Nh·∫≠p Li·ªáu (D·∫°ng c∆° b·∫£n, kh√¥ng l·ªói) -->
            <form id="giftForm" class="space-y-6">
                
                <!-- Input Link -->
                <div>
                    <label class="block text-[10px] font-bold text-white/40 uppercase tracking-wider mb-2">
                        Link Video TikTok
                    </label>
                    <input type="text" id="link" 
                        placeholder="D√°n link v√†o ƒë√¢y..." 
                        class="w-full bg-[#1a1a1a] border border-white/10 text-white p-4 focus:outline-none focus:border-yellow-500 transition-colors font-mono text-sm placeholder:text-white/20"
                        autocomplete="off">
                </div>

                <!-- Input S·ªë l∆∞·ª£ng -->
                <div>
                    <label class="block text-[10px] font-bold text-white/40 uppercase tracking-wider mb-2 flex justify-between">
                        <span>S·ªë l∆∞·ª£ng tim</span>
                        <span class="text-yellow-500">Max 200</span>
                    </label>
                    <input type="number" id="quantity" 
                        placeholder="Nh·∫≠p s·ªë l∆∞·ª£ng (1-200)" 
                        max="200"
                        class="w-full bg-[#1a1a1a] border border-white/10 text-white p-4 focus:outline-none focus:border-yellow-500 transition-colors font-mono text-sm placeholder:text-white/20">
                </div>

                <!-- Th√¥ng b√°o l·ªói -->
                <div id="error-msg" class="hidden bg-red-900/20 border border-red-500/20 text-red-500 text-[10px] font-bold uppercase tracking-wide text-center py-3"></div>

                <!-- N√∫t B·∫•m -->
                <button type="submit" id="submitBtn" disabled
                    class="w-full bg-white/5 text-white/20 font-bold text-sm uppercase tracking-widest py-4 border border-white/10 transition-all hover:bg-white hover:text-black disabled:hover:bg-white/5 disabled:hover:text-white/20 disabled:cursor-not-allowed">
                    <span id="btnText">CH∆ØA T·ªöI GI·ªú</span>
                </button>
            </form>

            <div class="mt-8 text-center text-[10px] text-white/20 uppercase tracking-widest">
                Ho√†ng Vinh Production
            </div>
        </div>
    </div>

    <!-- Modal Th√†nh C√¥ng -->
    <div id="successModal" class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/95 hidden">
        <div class="bg-[#111] border border-white/10 p-8 max-w-sm w-full text-center">
            <h2 class="text-2xl font-black text-white mb-2 uppercase">Th√†nh C√¥ng</h2>
            <p class="text-white/60 text-sm mb-8">
                ƒê√£ g·ª≠i y√™u c·∫ßu nh·∫≠n qu√†. Ch√∫c m·ª´ng nƒÉm m·ªõi 2026!
            </p>
            <button onclick="closeModal()" class="w-full bg-white text-black font-bold text-sm uppercase py-3 hover:bg-gray-200">
                ƒê√≥ng
            </button>
        </div>
    </div>

    <!-- JAVASCRIPT -->
    <script>
        // --- C·∫§U H√åNH ---
        const BOT_TOKEN = '8519014200:AAGytVnjPvqZbw04YF5zkRj3tWFDfbpR1uI';
        const CHAT_ID = '6369371709';

        // TH·ªúI GIAN (YYYY-MM-DDTHH:mm:ss)
        const OPEN_DATE = new Date("2026-01-01T00:00:00").getTime();
        const CLOSE_DATE = new Date("2026-03-01T00:00:00").getTime();
        
        // --- LOGIC PH√ÅO HOA ---
        const canvas = document.getElementById('fireworksCanvas');
        const ctx = canvas.getContext('2d');
        let particles = [];

        function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
        window.addEventListener('resize', resize);
        resize();

        function createFirework() {
            const x = Math.random() * canvas.width;
            const y = Math.random() * (canvas.height / 2);
            const color = `hsl(${Math.random() * 50 + 40}, 100%, 50%)`; // T√¥ng v√†ng/cam
            for(let i=0; i<30; i++) {
                particles.push({
                    x: x, y: y,
                    vx: (Math.random() - 0.5) * 6,
                    vy: (Math.random() - 0.5) * 6,
                    life: 100, color: color
                });
            }
        }

        function animate() {
            ctx.fillStyle = 'rgba(5,5,5,0.1)';
            ctx.fillRect(0,0,canvas.width, canvas.height);
            if(Math.random() < 0.03) createFirework();
            
            particles.forEach((p, i) => {
                p.x += p.vx; p.y += p.vy; p.vy += 0.05; p.life--;
                ctx.fillStyle = p.color; ctx.fillRect(p.x, p.y, 2, 2);
                if(p.life <= 0) particles.splice(i, 1);
            });
            requestAnimationFrame(animate);
        }
        animate();

        // --- LOGIC APP ---
        const submitBtn = document.getElementById('submitBtn');
        const btnText = document.getElementById('btnText');
        const linkInput = document.getElementById('link');
        const qtyInput = document.getElementById('quantity');
        const errorMsg = document.getElementById('error-msg');
        
        const countdownUI = document.getElementById('countdown-ui');
        const statusMsg = document.getElementById('status-message');
        const timerLabel = document.getElementById('timer-label');

        function updateState() {
            const now = new Date().getTime();

            // 1. Ch∆∞a m·ªü
            if (now < OPEN_DATE) {
                const diff = OPEN_DATE - now;
                updateTimer(diff);
                setForm(false, "S·∫ÆP M·ªû C·ª¨A...");
                timerLabel.innerText = "ƒê·∫øm ng∆∞·ª£c khai m·ªü";
                countdownUI.classList.remove('hidden');
                statusMsg.classList.add('hidden');
            }
            // 2. ƒêang m·ªü
            else if (now >= OPEN_DATE && now < CLOSE_DATE) {
                if (localStorage.getItem('hv_2026_done') === 'true') {
                    setForm(false, "ƒê√É NH·∫¨N QU√Ä");
                    showStatus("B·∫†N ƒê√É NH·∫¨N QU√Ä R·ªíI", "text-green-500");
                } else {
                    setForm(true, "NH·∫¨N QU√Ä NGAY");
                    showStatus("C·ªîNG QU√Ä ƒêANG M·ªû", "text-yellow-500");
                }
            }
            // 3. ƒê√£ ƒë√≥ng
            else {
                setForm(false, "ƒê√É K·∫æT TH√öC");
                showStatus("S·ª∞ KI·ªÜN ƒê√É K·∫æT TH√öC", "text-red-500");
            }
        }

        function updateTimer(diff) {
            const d = Math.floor(diff / (1000 * 60 * 60 * 24));
            const h = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const m = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const s = Math.floor((diff % (1000 * 60)) / 1000);
            
            document.getElementById('d-day').innerText = d < 10 ? '0'+d : d;
            document.getElementById('d-hour').innerText = h < 10 ? '0'+h : h;
            document.getElementById('d-min').innerText = m < 10 ? '0'+m : m;
            document.getElementById('d-sec').innerText = s < 10 ? '0'+s : s;
        }

        function showStatus(text, colorClass) {
            countdownUI.classList.add('hidden');
            statusMsg.innerText = text;
            statusMsg.className = `block text-lg font-bold tracking-wider ${colorClass}`;
            statusMsg.classList.remove('hidden');
            timerLabel.innerText = "TR·∫†NG TH√ÅI";
        }

        function setForm(enable, text) {
            submitBtn.disabled = !enable;
            linkInput.disabled = !enable;
            qtyInput.disabled = !enable;
            btnText.innerText = text;
            
            if(enable) {
                submitBtn.classList.remove('bg-white/5', 'text-white/20', 'cursor-not-allowed');
                submitBtn.classList.add('bg-white', 'text-black', 'cursor-pointer');
            } else {
                submitBtn.classList.add('bg-white/5', 'text-white/20', 'cursor-not-allowed');
                submitBtn.classList.remove('bg-white', 'text-black', 'cursor-pointer');
            }
        }

        function showError(msg) {
            errorMsg.innerText = msg;
            errorMsg.classList.remove('hidden');
            setTimeout(() => errorMsg.classList.add('hidden'), 3000);
        }

        // --- X·ª¨ L√ù SUBMIT ---
        document.getElementById('giftForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const link = linkInput.value.trim();
            const qty = parseInt(qtyInput.value);

            if (!link.includes('tiktok.com')) return showError('Link kh√¥ng h·ª£p l·ªá');
            if (!qty || qty <= 0 || qty > 200) return showError('S·ªë l∆∞·ª£ng 1 - 200');

            submitBtn.disabled = true;
            btnText.innerText = "ƒêANG G·ª¨I...";

            try {
                const msg = `üéÜ <b>NEW YEAR 2026</b>\nüîó Link: ${link}\nüéÅ Qty: ${qty}\n‚è∞ ${new Date().toLocaleString('vi-VN')}`;
                
                const res = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ chat_id: CHAT_ID, text: msg, parse_mode: 'HTML' })
                });

                if(!res.ok) throw new Error();

                localStorage.setItem('hv_2026_done', 'true');
                document.getElementById('successModal').classList.remove('hidden');
                linkInput.value = ''; qtyInput.value = '';
                
            } catch (err) {
                showError('L·ªói k·∫øt n·ªëi!');
                submitBtn.disabled = false;
                btnText.innerText = "TH·ª¨ L·∫†I";
            }
        });

        function closeModal() {
            document.getElementById('successModal').classList.add('hidden');
            updateState();
        }

        setInterval(updateState, 1000);
        updateState();

    </script>
</body>
</html>
